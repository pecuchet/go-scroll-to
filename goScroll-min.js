const W=window,D=W.document,CLASS_NAME="auto-scrolling",SPEED=2,STOP_EVENT="ontouchstart"in W||W.navigator.MaxTouchPoints>0||W.navigator.msMaxTouchPoints>0?"touchstart":"wheel";let scrolling=0;function easeOutQuad(t,n,o,e){return Math.round(-o*(t/=e)*(t-2)+n)}function position(t,n,o){if(n.nodeType)return t.getBoundingClientRect().top-n.getBoundingClientRect().top+o;return t.getBoundingClientRect().top+D.documentElement.scrollTop}function listen(){scrolling=0}export default function goScroll(t={}){let n=t.context||W,o=n[t.context?"scrollTop":"pageYOffset"],e=t.to&&1===t.to.nodeType?position(t.to,n,o):t.to||0,i=e-(t.offset||0)-o,s=Date.now(),c=Math.abs(i/(t.speed||SPEED)),l=s+c,r=t.callback,a=t.context?function(t){n.scrollTop=t}:function(t){n.scrollTo(0,t)};scrolling=1;D.body.classList.add(CLASS_NAME);n.addEventListener(STOP_EVENT,listen);W.requestAnimationFrame(u);function u(){let f=Date.now();if(scrolling&&f<=l){a(easeOutQuad(f-s,o,i,c));W.requestAnimationFrame(u);return}if(scrolling)W.requestAnimationFrame(()=>{a(e-(t.offset||0))});if("function"===typeof r)r.call(n,scrolling);n.removeEventListener(STOP_EVENT,listen);D.body.classList.remove(CLASS_NAME)}};